KJE.MortgagePayoffCalc=function(){this.MSG_ERROR1=KJE.parameters.get("MSG_ERROR1","Years remaining must be less mortgage term.");this.BY_YEAR=true;this.NBR_PERIODS=12;this.MORTGAGE_MONTHS_LEFT=0;this.MORTGAGE_MONTHS_ELAPSED=0;this.aInterestPaid=null;this.aNewInterestPaid=null;this.aPrincipalBalance=null;this.aNewPrincipalBalance=null;this.sSchedule=new KJE.Repeating()};KJE.MortgagePayoffCalc.prototype.clear=function(){this.MORTGAGE_YRS_LEFT=0;this.MORTGAGE_YRS_LENGTH=0;this.MORTGAGE_AMT=0;this.INCREASE_BY_AMT=0;this.RATE=0};KJE.MortgagePayoffCalc.prototype.calculate=function(G){var m=KJE;var E=this.MORTGAGE_YRS_LEFT;var D=this.MORTGAGE_YRS_LENGTH;var d=this.MORTGAGE_AMT;var B=this.INCREASE_BY_AMT;var j=this.RATE;if(E>D){throw (this.MSG_ERROR1)}var F=j/(this.NBR_PERIODS*100);var k=D*this.NBR_PERIODS;var w=m.round(KJE.PMT(F,k,d),2);this.MORTGAGE_MONTHS_LEFT=E*this.NBR_PERIODS;this.MORTGAGE_MONTHS_ELAPSED=(D-E)*this.NBR_PERIODS;var b=0;var y=d;var u=0;var f=d;var e=0;var h=0;var r=0;var a=0;var q=Math.round(D);this.aInterestPaid=KJE.FloatArray(q);this.aNewInterestPaid=KJE.FloatArray(q);this.aPrincipalBalance=KJE.FloatArray(q);this.aNewPrincipalBalance=KJE.FloatArray(q);this.sCats=new Array(q);for(var x=1;x<=q;x++){this.sCats[x-1]=m.number(x)}if(G){var o=this.sSchedule;o.clearRepeat();o.addHeader("&nbsp;",{sCell:KJE._sHeadingUnderline,sContent:o.sReportCol("Existing Payment Schedule",1),sFormat:"COLSPAN=3 scope=colspan"},{sCell:KJE._sHeadingUnderline,sContent:o.sReportCol("Accelerated Payment Schedule",1),sFormat:"COLSPAN=3 scope=colspan"});if(this.BY_YEAR){o.addHeader(o.sReportCol("Year",7),o.sReportCol("Total<br />Payments",8),o.sReportCol("Total<br />Interest",9),o.sReportCol("Ending<br />Balance",10),o.sReportCol("Total<br />Payments",8),o.sReportCol("Total<br />Interest",9),o.sReportCol("Ending<br />Balance",10))}else{o.addHeader("&nbsp;",o.sReportCol("Payment",4),o.sReportCol("Interest",5),o.sReportCol("Balance",6),o.sReportCol("Payment",4),o.sReportCol("Interest",5),o.sReportCol("Balance",6))}o.addRepeat("&nbsp;","&nbsp;","&nbsp;",m.dollars(y,2),"&nbsp;","&nbsp;",m.dollars(f,2))}var t=0;var A=0;var z=0;var c=0;var C=0;var g=0;var l=0;for(var v=1;v<=k;v++){e=m.round(F*y,2);h=m.round(F*f,2);if(y==0){r=0}else{r=w-e;if(v>this.MORTGAGE_MONTHS_ELAPSED){a=w+B-h}else{a=w-h}if(y>0){y-=r}}if(f==0){a=0}else{if(f>0){f-=a;l=v}if(y<0){r=r+y;y=0}if(f<0){a=a+f;f=0}}b+=e;u+=h;t+=e+r;A+=e;z=y;c+=h+a;C+=h;g=f;if((v%12==0)){var s=Math.floor((v-1)/12);this.aInterestPaid[s]=b;this.aNewInterestPaid[s]=u;this.aPrincipalBalance[s]=y;this.aNewPrincipalBalance[s]=f;if(G&&this.BY_YEAR){o.addRepeat(m.number(s+1),m.dollars(t,2),m.dollars(A,2),m.dollars(z,2),m.dollars(c,2),m.dollars(C,2),m.dollars(g,2))}t=0;A=0;z=0;c=0;C=0;g=0}if(G&&!this.BY_YEAR){o.addRepeat(v,m.dollars(e+r,2),m.dollars(e,2),m.dollars(y,2),m.dollars(h+a,2),m.dollars(h,2),m.dollars(f,2))}}this.MORTGAGE_INTEREST_TOTAL=b;this.MORTGAGE_PAYMENT_TOTAL=b+d;this.EARLY_PAYOFF_MONTHS=D*12-l;this.EARLY_PAYOFF_YEARS=Math.floor(this.EARLY_PAYOFF_MONTHS/12);this.EARLY_PAYOFF_PI_PAYMENT=w+B;this.EARLY_PAYOFF_INTEREST_TOTAL=u;this.EARLY_PAYOFF_PAYMENT_TOTAL=u+d;this.EARLY_PAYOFF_SAVINGS=this.MORTGAGE_PAYMENT_TOTAL-this.EARLY_PAYOFF_PAYMENT_TOTAL;this.MONTHLY_RATE=F;this.MORTGAGE_MONTH_LENGTH=k;this.PI_PAYMENT=w;this.MSG_EARLY_PAYOFF_MONTHS=KJE.getTermLabel(this.EARLY_PAYOFF_MONTHS,(this.EARLY_PAYOFF_MONTHS?false:true))};KJE.MortgagePayoffCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;d=KJE.replace("MORTGAGE_YRS_LEFT",c.number(this.MORTGAGE_YRS_LEFT),d);d=KJE.replace("MORTGAGE_YRS_LENGTH",c.number(this.MORTGAGE_YRS_LENGTH),d);d=KJE.replace("MORTGAGE_AMT",c.dollars(this.MORTGAGE_AMT),d);d=KJE.replace("INCREASE_BY_AMT",c.dollars(this.INCREASE_BY_AMT),d);d=KJE.replace("RATE",c.percent(this.RATE/100,2),d);d=KJE.replace("MONTHLY_RATE",c.percent(this.MONTHLY_RATE),d);d=KJE.replace("MORTGAGE_MONTH_LENGTH",c.number(this.MORTGAGE_MONTH_LENGTH),d);d=KJE.replace("MORTGAGE_MONTHS_LEFT",c.number(this.MORTGAGE_MONTHS_LEFT),d);d=KJE.replace("MORTGAGE_MONTHS_ELAPSED",c.number(this.MORTGAGE_MONTHS_ELAPSED),d);d=KJE.replace("MORTGAGE_INTEREST_TOTAL",c.dollars(this.MORTGAGE_INTEREST_TOTAL),d);d=KJE.replace("MORTGAGE_PAYMENT_TOTAL",c.dollars(this.MORTGAGE_PAYMENT_TOTAL),d);d=KJE.replace("MSG_EARLY_PAYOFF_MONTHS",this.MSG_EARLY_PAYOFF_MONTHS,d);d=KJE.replace("EARLY_PAYOFF_MONTHS",c.number(this.EARLY_PAYOFF_MONTHS-this.EARLY_PAYOFF_YEARS*12),d);d=KJE.replace("EARLY_PAYOFF_YEARS",c.number(this.EARLY_PAYOFF_YEARS),d);d=KJE.replace("EARLY_PAYOFF_PI_PAYMENT",c.dollars(this.EARLY_PAYOFF_PI_PAYMENT),d);d=KJE.replace("EARLY_PAYOFF_INTEREST_TOTAL",c.dollars(this.EARLY_PAYOFF_INTEREST_TOTAL),d);d=KJE.replace("EARLY_PAYOFF_PAYMENT_TOTAL",c.dollars(this.EARLY_PAYOFF_PAYMENT_TOTAL),d);d=KJE.replace("EARLY_PAYOFF_SAVINGS",c.dollars(this.EARLY_PAYOFF_SAVINGS),d);d=KJE.replace("PI_PAYMENT",c.dollars(this.PI_PAYMENT),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.CalcName="Mortgage Payoff Calculator";KJE.CalcType="mortgagepayoff";KJE.CalculatorTitleTemplate="Mortgage repayment shortened by KJE1";KJE.parseInputs=function(a){a=KJE.replace("**MORTGAGE_YRS_LENGTH**",KJE.getMortgageTermDrop("MORTGAGE_YRS_LENGTH",KJE.Default.MortgageTerm),a);a=KJE.replace("**MORTGAGE_YRS_LEFT**",KJE.getTermChoice("MORTGAGE_YRS_LEFT",KJE.parameters.get("MORTGAGE_YRS_LEFT",KJE.Default.MortgageTerm-5),true,KJE.Default.MortgageTermMax,100,"",false,true),a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.MortgagePayoffCalc();KJE.GuiControl=new KJE.MortgagePayoff(KJE.CalcControl)};KJE.MortgagePayoff=function(k){var d=KJE;var a=KJE.gLegend;var e=KJE.inputs.items;this.MSG_GRAPH1=KJE.parameters.get("MSG_GRAPH1","Interest with additional principal payments");this.MSG_GRAPH2=KJE.parameters.get("MSG_GRAPH2","Scheduled interest paid");this.MSG_GRAPH3=KJE.parameters.get("MSG_GRAPH3","Balance with additional principal payments");this.MSG_GRAPH4=KJE.parameters.get("MSG_GRAPH4","Scheduled principal balance");KJE.MortgageRateSlider("RATE","Annual interest rate");KJE.MortgageAmtSlider("MORTGAGE_AMT","Original mortgage amount");KJE.DollarSlider("INCREASE_BY_AMT","Additional principal payment",0,50000,0,0,0);KJE.MortgageTermDropBoxSlider("MORTGAGE_YRS_LENGTH","Original mortgage term");KJE.Label("PI_PAYMENT","Current mortgage payment");KJE.Label("EARLY_PAYOFF_PI_PAYMENT","Monthly accelerated payment");KJE.Label("SAVINGS","Total savings",null,null,"KJEBold");KJE.Label("EARLY_PAYOFF_PAYMENT_TOTAL","Total accelerated payments",null,null,"KJEBold");KJE.Label("MORTGAGE_PAYMENT_TOTAL","Total scheduled payments",null,null,"KJEBold");var p=new Array();var m=KJE.parameters.get("TERM_MAXIMUM",30);for(var g=0;g<m;g++){p[g]=(g+1)}KJE.DropBoxSlider("MORTGAGE_YRS_LEFT","Years remaining",p);KJE.Radioboxes("BY_YEAR","Report amortization",true,"Annually","Monthly");var f=KJE.gNewGraph(KJE.gLINE,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE","Mortgage Balances and Interest"));f._legend._iOrientation=(a.BOTTOM);f._titleXAxis.setText(KJE.parameters.get("MSG_LABEL9",""));var o=KJE.parameters.get("MSG_DROPPER","Mortgage payoff inputs:");var n=KJE.parameters.get("MSG_DROPPER_DOWN","Total savings KJE1");var c=function(){return o+"|"+KJE.subText(KJE.getKJEReplaced(n,d.dollars(k.EARLY_PAYOFF_SAVINGS)),"KJERightBold")};KJE.addDropper(new KJE.Dropper("INPUTS",true,c,c),KJE.colorList[0]);var j=KJE.parameters.get("MSG_DROPPER2","Mortgage payoff result summary:");var b=KJE.parameters.get("MSG_DROPPER2_DOWN","<table style='width:100%' role='presentation'><tr><td class=KJECell50>Current payment: KJE1</td><td class=KJECell50>Scheduled payments: KJE3</td></tr><tr><td>Accelerated payment: KJE2</td><td>Accelerated payments: KJE4</td></tr></table>");var h=function(){return j+KJE.subText(KJE.getKJEReplaced(b,d.dollars(k.PI_PAYMENT,2),d.dollars(k.EARLY_PAYOFF_PI_PAYMENT),d.dollars(k.MORTGAGE_PAYMENT_TOTAL),d.dollars(k.EARLY_PAYOFF_PAYMENT_TOTAL))+"<div style='height:10px'></div>","KJECenter")};KJE.addDropper(new KJE.Dropper("INPUTS2",false,j,h),KJE.colorList[0])};KJE.MortgagePayoff.prototype.setValues=function(b){var a=KJE.inputs.items;b.MORTGAGE_YRS_LEFT=Math.round(a.MORTGAGE_YRS_LEFT.getValue());b.MORTGAGE_YRS_LENGTH=Math.round(a.MORTGAGE_YRS_LENGTH.getValue());b.MORTGAGE_AMT=a.MORTGAGE_AMT.getValue();b.INCREASE_BY_AMT=a.INCREASE_BY_AMT.getValue();b.RATE=a.RATE.getValue();b.BY_YEAR=a.BY_YEAR.getValue()};KJE.MortgagePayoff.prototype.refresh=function(e){var d=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];KJE.setTitleTemplate(e.MSG_EARLY_PAYOFF_MONTHS);a.removeAll();a.setGraphCategories(e.sCats);a.add(new KJE.gGraphDataSeries(e.aNewInterestPaid,this.MSG_GRAPH1,a.getColor(1)));a.add(new KJE.gGraphDataSeries(e.aInterestPaid,this.MSG_GRAPH2,a.getColor(2)));a.add(new KJE.gGraphDataSeries(e.aNewPrincipalBalance,this.MSG_GRAPH3,a.getColor(3)));a.add(new KJE.gGraphDataSeries(e.aPrincipalBalance,this.MSG_GRAPH4,a.getColor(4)));a.paint();b.EARLY_PAYOFF_PI_PAYMENT.setText(d.dollars(e.EARLY_PAYOFF_PI_PAYMENT));b.SAVINGS.setText(d.dollars(e.EARLY_PAYOFF_SAVINGS));b.PI_PAYMENT.setText(d.dollars(e.PI_PAYMENT,2));b.EARLY_PAYOFF_PAYMENT_TOTAL.setText(d.dollars(e.EARLY_PAYOFF_PAYMENT_TOTAL));b.MORTGAGE_PAYMENT_TOTAL.setText(d.dollars(e.MORTGAGE_PAYMENT_TOTAL))};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-MORTGAGE_YRS_LEFT'>**MORTGAGE_YRS_LEFT**</div> <div id='KJE-C-MORTGAGE_YRS_LENGTH'>**MORTGAGE_YRS_LENGTH**</div> <div id='KJE-C-MORTGAGE_AMT'><input id='KJE-MORTGAGE_AMT' /></div> <div id='KJE-C-INCREASE_BY_AMT'><input id='KJE-INCREASE_BY_AMT' /></div> <div id='KJE-C-RATE'><input id='KJE-RATE' /></div> <div id='KJE-C-BY_YEAR'><fieldset id='KJE-FS-BY_YEAR'><input id='KJE-BY_YEAR1' type=radio name=BY_YEAR /><input id='KJE-BY_YEAR2' type=radio name=BY_YEAR /></fieldset></div>  <div style=\"height:10px\"></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-PI_PAYMENT'><div id='KJE-PI_PAYMENT'></div></div> <div id='KJE-C-EARLY_PAYOFF_PI_PAYMENT'><div id='KJE-EARLY_PAYOFF_PI_PAYMENT'></div></div> <div id='KJE-C-MORTGAGE_PAYMENT_TOTAL'><div id='KJE-MORTGAGE_PAYMENT_TOTAL'></div></div> <div id='KJE-C-EARLY_PAYOFF_PAYMENT_TOTAL'><div id='KJE-EARLY_PAYOFF_PAYMENT_TOTAL'></div></div> <div id='KJE-C-SAVINGS'><div id='KJE-SAVINGS'></div></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-RATE' ><dt>Annual interest rate</dt><dd>The annual interest rate used to calculate your monthly payment. Please note that the interest rate is different from the Annual Percentage Rate (APR), which includes other expenses such as mortgage insurance, and the origination fee and or point(s), which were paid when the mortgage was first originated. The APR is normally higher than the simple interest rate.</dd></div> <div id='KJE-D-MORTGAGE_YRS_LENGTH' ><dt>Original mortgage term</dt><dd>Total length, or term, of your original mortgage in years. Common terms are 15, 20 and 30 years.</dd></div> <div id='KJE-D-MORTGAGE_YRS_LEFT' ><dt>Years Remaining</dt><dd>Total number of years remaining on your original mortgage.</dd></div> <div id='KJE-D-MORTGAGE_AMT' ><dt>Original mortgage amount</dt><dd>The original amount financed with your mortgage, not to be confused with the remaining balance or principal balance.</dd></div> <div id='KJE-D-INCREASE_BY_AMT' ><dt>Additional principal payment</dt><dd>Your proposed extra payment amount per month. This amount will be used to further reduce your principal balance.</dd></div> <div id='KJE-D-PI_PAYMENT' ><dt>Current mortgage payment</dt><dd>Monthly principal and interest payment (PI) based on your original mortgage amount, term and interest rate.</dd></div> <div id='KJE-D-EARLY_PAYOFF_PI_PAYMENT' ><dt>Monthly accelerated payment</dt><dd>Scheduled payment plus your additional principal payment.</dd></div> <div id='KJE-D-SAVINGS' ><dt>Total savings</dt><dd>Total amount you would save in interest if you made the accelerated payment until your mortgage was paid in full.</dd></div> ";KJE.ReportText=' <!--HEADING "Mortgage Payoff " HEADING--> <h2 class=\'KJEReportHeader KJEFontHeading\'>Mortgage repayment shortened by MSG_EARLY_PAYOFF_MONTHS.</h2>By increasing your mortgage payment INCREASE_BY_AMT per month, you not only shorten your mortgage, but it will also save you EARLY_PAYOFF_SAVINGS in interest. **GRAPH** <div class=KJEReportTableDiv><table class=KJEReportTable><caption class=\'KJEHeaderRow KJEHeading\'>Mortgage Payoff Summary</caption> <tfoot class=\'KJEReportTFooter\'> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Savings</th><td class="KJECellStrong" >EARLY_PAYOFF_SAVINGS</td></tr> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Mortgage shortened by</th><td class="KJECellStrong" >EARLY_PAYOFF_YEARS years, EARLY_PAYOFF_MONTHS months</td></tr> </tfoot> <tbody class=\'KJEReportTBody\'> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell60" scope=\'row\'>Original term</th><td class="KJECell" >MORTGAGE_YRS_LENGTH Years</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Remaining</th><td class="KJECell" >MORTGAGE_YRS_LEFT Years</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Annual interest rate</th><td class="KJECell" >RATE</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Additional principal payment</th><td class="KJECell" >INCREASE_BY_AMT per month</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Normal payment (PI)</th><td class="KJECell" >PI_PAYMENT</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Accelerated payment (PI)</th><td class="KJECell" >EARLY_PAYOFF_PI_PAYMENT</td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Total scheduled payments</th><td class="KJECell" >MORTGAGE_PAYMENT_TOTAL</td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Total accelerated payments</th><td class="KJECell" >EARLY_PAYOFF_PAYMENT_TOTAL</td></tr> </tbody> </table> </div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Payment Schedule</h2> **REPEATING GROUP** ';
KJE.BiweeklyCalc=function(){this.bHidePaymentsOnSchedule=KJE.parameters.get("HIDE_PAYMENTS_ON_SCHEDULE",false);this.COMPARE_TYPE=KJE.parameters.get("COMPARE_TYPE","MORTGAGE");this.LOAN_COUNT=2;this.LOAN_AMOUNT=KJE.FloatArray(this.LOAN_COUNT);this.INTEREST_RATE=KJE.FloatArray(this.LOAN_COUNT);this.LOAN_INTEREST=KJE.FloatArray(this.LOAN_COUNT);this.NEW_INTEREST_RATE=KJE.FloatArray(this.LOAN_COUNT);this.LOAN_TERM=KJE.FloatArray(this.LOAN_COUNT);this.LOAN_TERM_END=KJE.FloatArray(this.LOAN_COUNT);this.LOAN_TERM_CALC=KJE.FloatArray(this.LOAN_COUNT);this.PAYMENTS_PER_YEAR=new Array(this.LOAN_COUNT);this.PAYMENT_TYPE=new Array(this.LOAN_COUNT);this.ORIGINATION_FEE=KJE.FloatArray(this.LOAN_COUNT);this.OTHER_FEES=KJE.FloatArray(this.LOAN_COUNT);this.OTHER_COSTS=KJE.FloatArray(this.LOAN_COUNT);this.CLOSING_COSTS=KJE.FloatArray(this.LOAN_COUNT);this.MONTHLY_LOAN_PAYMENT=KJE.FloatArray(this.LOAN_COUNT);this.ANNUAL_PERCENTAGE_RATE=KJE.FloatArray(this.LOAN_COUNT);this.LOAN_PAYMENT=KJE.FloatArray(this.LOAN_COUNT);this.ACCEL_SHORTEN_MONTHS=KJE.FloatArray(this.LOAN_COUNT);this.INTEREST_PAID=KJE.FloatArray(this.LOAN_COUNT);this.TOTAL_OF_PAYMENTS=KJE.FloatArray(this.LOAN_COUNT);this.BALANCE_TERM_END=KJE.FloatArray(this.LOAN_COUNT);this.DS_PRINCIPAL=new Array(this.LOAN_COUNT);this.DS_INTEREST=new Array(this.LOAN_COUNT);this.DS_PAYMENTS=new Array(this.LOAN_COUNT);this.cats=null;this.sSchedule=new KJE.Repeating()};KJE.BiweeklyCalc.prototype.clear=function(){var a=this.LOAN_COUNT;for(var b=0;b<a;b++){this.LOAN_AMOUNT[b]=0;this.INTEREST_RATE[b]=0;this.ORIGINATION_FEE[b]=0;this.OTHER_FEES[b]=0;this.OTHER_COSTS[b]=0;this.NEW_INTEREST_RATE[b]=0;this.BALANCE_TERM_END[b]=0}this.PAYMENT_TYPE[0]=KJE.Default.PAY_ACCEL_WEEK;this.PAYMENT_TYPE[1]=KJE.Default.PAY_MONTHLY};KJE.BiweeklyCalc.prototype.calculate=function(J){var l=KJE;var B=this.LOAN_AMOUNT;var f=this.INTEREST_RATE;var K=this.ORIGINATION_FEE;var w=this.OTHER_FEES;var v=this.OTHER_COSTS;var E=this.NEW_INTEREST_RATE;var s=this.PAYMENT_TYPE;var u=this.LOAN_TERM_CALC;var d=this.TOTAL_OF_PAYMENTS;var H=this.LOAN_TERM;var o=this.CLOSING_COSTS;var z=this.LOAN_PAYMENT;var t=this.MONTHLY_LOAN_PAYMENT;var M=this.ANNUAL_PERCENTAGE_RATE;var g=this.PAYMENTS_PER_YEAR;var D=this.LOAN_INTEREST;var e=this.INTEREST_PAID;var r=this.LOAN_COUNT;var b=this.BALANCE_TERM_END;var c=this.LOAN_TERM_END;for(var A=0;A<r;A++){o[A]=0;t[A]=0;M[A]=0;g[A]=12;D[A]=0;e[A]=0}this.cats=new Array(H[0]+1);for(var A=0;A<r;A++){g[A]=KJE.Default.PAY_FREQUENCY[s[A]];E[A]=(this.COMPARE_TYPE==("CAMORTGAGE")?(Math.pow(1+(f[A]/200),(1/(g[A]/2)))-1)*(g[A]*100):f[A]);this.CLOSING_COSTS[A]=K[A]+K[A]+w[A]+v[A];u[A]=H[A];if(s[A]==(KJE.Default.PAY_ACCEL_WEEK)||s[A]==(KJE.Default.PAY_ACCEL_BI)){var h=(this.COMPARE_TYPE==("CAMORTGAGE")?(Math.pow(1+(f[A]/200),(1/6))-1):f[A]/1200);z[A]=l.round(KJE.PMT(h,H[A]*12,B[A]),2);z[A]=l.round(((z[A]*13)/g[A]),2);t[A]=(z[A]*g[A])/12;u[A]=KJE.PERIODS(E[A]/(g[A]*100),z[A],B[A])/g[A]}else{if(g[A]==12){z[A]=l.round(KJE.PMT(E[A]/1200,H[A]*12,B[A]),2);t[A]=z[A]}else{z[A]=l.round(KJE.PMT(E[A]/(g[A]*100),H[A]*g[A],B[A]),2);t[A]=(z[A]*g[A])/12}}this.ANNUAL_PERCENTAGE_RATE[A]=KJE.APR(u[A]*g[A],z[A],E[A]/(g[A]*100),B[A],this.CLOSING_COSTS[A])*g[A];var a=B[A];var I=0;var L=0;var G=0;var j=0;var C=0;var k=z[A];this.DS_PRINCIPAL[A]=KJE.FloatArray(H[0]+1);this.DS_INTEREST[A]=KJE.FloatArray(H[0]+1);this.DS_PAYMENTS[A]=KJE.FloatArray(H[0]+1);var x=0;this.cats[x]="0";this.DS_PRINCIPAL[A][x]=B[A];this.DS_INTEREST[A][x]=0;this.DS_PAYMENTS[A][x]=0;x+=1;var F=0;for(var y=1;y<=(H[0]*g[A]);y++){F=y-1;k=z[A];I=l.round((E[A]/(g[A]*100))*a,2);L=k-I;a-=L;if(a<0){k+=a;a=0;L=k-I}if((u[A]*g[A])==y){if(a>0.005){k+=a;a=0;L=k-I}else{a=0}}if(a==0&&this.ACCEL_SHORTEN_MONTHS[A]==0){this.ACCEL_SHORTEN_MONTHS[A]=y}G+=I;j+=L;C+=k;d[A]+=k;e[A]+=I;if(y==g[A]*c[A]){b[A]=a}if((y%g[A])==0){this.cats[x]=""+x;this.DS_PRINCIPAL[A][x]=a;this.DS_INTEREST[A][x]=G;this.DS_PAYMENTS[A][x]=C;x+=1;G=0;j=0;C=0}}}if(J){var m=this.sSchedule;m.clearRepeat();if(!this.bHidePaymentsOnSchedule){m.addHeader("&nbsp;",{sCell:KJE._sHeadingUnderline,sContent:m.sReportCol("Accelerated Payments",1),sFormat:"COLSPAN=2"},{sCell:KJE._sHeadingUnderline,sContent:m.sReportCol("Monthly Payments",2),sFormat:"COLSPAN=2"})}m.addHeader(m.sReportCol(m.sReportCol("Year"),3),(this.bHidePaymentsOnSchedule?null:m.sReportCol("Payments",4)),m.sReportCol(this.bHidePaymentsOnSchedule?"Accelerated<br />Payment<br />Balance":"Balance",5),(this.bHidePaymentsOnSchedule?null:m.sReportCol("Payments",6)),m.sReportCol(this.bHidePaymentsOnSchedule?"Monthly<br />Payment<br />Balance":"Balance",7));m.addRepeat("&nbsp;",(this.bHidePaymentsOnSchedule?null:"&nbsp;"),l.dollars(B[1]),(this.bHidePaymentsOnSchedule?null:"&nbsp;"),l.dollars(B[0]));for(var A=1;A<=(H[0]);A++){m.addRepeat(l.number(A),(this.bHidePaymentsOnSchedule?null:l.dollars(this.DS_PAYMENTS[1][A])),l.dollars(this.DS_PRINCIPAL[1][A]),(this.bHidePaymentsOnSchedule?null:l.dollars(this.DS_PAYMENTS[0][A])),l.dollars(this.DS_PRINCIPAL[0][A]))}}};KJE.BiweeklyCalc.prototype.formatReport=function(b){var c=KJE;var a=this.iDecimal;var d=b;for(var e=0;e<this.LOAN_COUNT;e++){d=KJE.replace("PAYMENT_TYPE"+e,KJE.Default.PAY_PERIODS[this.PAYMENT_TYPE[e]],d);d=KJE.replace("LOAN_AMOUNT"+e,c.dollars(this.LOAN_AMOUNT[e]),d);d=KJE.replace("LOAN_INTEREST"+e,c.dollars(this.LOAN_INTEREST[e]),d);d=KJE.replace("INTEREST_PAID"+e,c.dollars(this.INTEREST_PAID[e]),d);d=KJE.replace("INTEREST_RATE"+e,c.percent(this.INTEREST_RATE[e]/100,3),d);d=KJE.replace("LOAN_TERM_END"+e,c.number(this.LOAN_TERM_END[e],0),d);d=KJE.replace("LOAN_TERM"+e,c.number(this.LOAN_TERM_CALC[e],((this.PAYMENT_TYPE[e]==KJE.Default.PAY_ACCEL_WEEK||this.PAYMENT_TYPE[e]==KJE.Default.PAY_ACCEL_BI)?1:0))+" "+KJE.MSG_YEARS_LBL,d);d=KJE.replace("ORIGINATION_FEE"+e,c.dollars(this.ORIGINATION_FEE[e]),d);d=KJE.replace("OTHER_FEES"+e,c.dollars(this.OTHER_FEES[e]),d);d=KJE.replace("OTHER_COSTS"+e,c.dollars(this.OTHER_COSTS[e]),d);d=KJE.replace("CLOSING_COSTS"+e,c.dollars(this.CLOSING_COSTS[e]),d);d=KJE.replace("MONTHLY_LOAN_PAYMENT"+e,c.dollars(this.MONTHLY_LOAN_PAYMENT[e],2),d);d=KJE.replace("LOAN_PAYMENT"+e,c.dollars(this.LOAN_PAYMENT[e],2)+" "+KJE.Default.PAY_PERIODS[this.PAYMENT_TYPE[e]],d);d=KJE.replace("ANNUAL_PERCENTAGE_RATE"+e,c.percent(this.ANNUAL_PERCENTAGE_RATE[e],3),d);d=KJE.replace("BALANCE_TERM_END"+e,c.dollars(this.BALANCE_TERM_END[e]),d)}d=KJE.replace("PAY_ACCEL_WEEK_SELECTED",(this.PAYMENT_TYPE[1]==KJE.Default.PAY_ACCEL_WEEK?"SELECTED":""),d);d=KJE.replace("PAY_ACCEL_BI_SELECTED",(this.PAYMENT_TYPE[1]==KJE.Default.PAY_ACCEL_BI?"SELECTED":""),d);d=KJE.replace("INPUTED_TERM",c.number(this.LOAN_TERM[1],0),d);d=KJE.replace("INTEREST_SAVINGS",c.dollars(this.INTEREST_PAID[0]-this.INTEREST_PAID[1]),d);d=d.replace("**REPEATING GROUP**",this.sSchedule.getRepeat());this.sSchedule.clearRepeat();return d};KJE.Default.PAY_WEEKLY=0;KJE.Default.PAY_ACCEL_WEEK=1;KJE.Default.PAY_ACCEL_BI=2;KJE.Default.PAY_BIWEEKLY=3;KJE.Default.PAY_2XMONTHLY=4;KJE.Default.PAY_MONTHLY=5;KJE.Default.PAY_PERIOD_IDs=[KJE.Default.PAY_WEEKLY,KJE.Default.PAY_ACCEL_WEEK,KJE.Default.PAY_ACCEL_BI,KJE.Default.PAY_BIWEEKLY,KJE.Default.PAY_2XMONTHLY,KJE.Default.PAY_MONTHLY];KJE.Default.PAY_PERIODS=["Weekly","accelerated weekly","accelerated biweekly","biweekly","semi-monthly","monthly"];KJE.Default.PAY_FREQUENCY=[52,52,26,26,24,12];KJE.Default.PAY_ACCELERATED=[false,true,true,false,false,false];KJE.Default.getPayDrop=function(b,a,c){KJE.Default.PAY_PERIODS=KJE.parameters.get("ARRAY_PAY_PERIODS",KJE.Default.PAY_PERIODS);return KJE.getDropBox(b,KJE.parameters.get(b,(!a?KJE.Default.PAY_BIWEEKLY:a)),[KJE.Default.PAY_ACCEL_WEEK,KJE.Default.PAY_ACCEL_BI],[KJE.Default.PAY_PERIODS[KJE.Default.PAY_ACCEL_WEEK],KJE.Default.PAY_PERIODS[KJE.Default.PAY_ACCEL_BI]],c)};KJE.Default.getPayDropCA=function(b,a,c){KJE.Default.PAY_PERIODS=KJE.parameters.get("ARRAY_PAY_PERIODS",KJE.Default.PAY_PERIODS);return KJE.getDropBox(b,KJE.parameters.get(b,(!a?KJE.Default.PAY_BIWEEKLY:a)),KJE.Default.PAY_PERIOD_IDs,KJE.Default.PAY_PERIODS,c)};KJE.CalcName="Biweekly Mortgage Calculator";KJE.CalcType="Biweekly";KJE.CalculatorTitleTemplate="Accelerated payments save KJE1 in interest!";KJE.parseInputs=function(a){a=KJE.replace("**LOAN_TERM**",KJE.getMortgageTermDrop("LOAN_TERM",30),a);a=KJE.replace("**LOAN_TERM_END**",KJE.getMortgageTermDrop("LOAN_TERM_END",5),a);a=KJE.replace("**PAYMENT_TYPE**",KJE.Default.getPayDrop("PAYMENT_TYPE",KJE.Default.PAY_ACCEL_BI),a);return a};KJE.initialize=function(){KJE.CalcControl=new KJE.BiweeklyCalc();KJE.GuiControl=new KJE.Biweekly(KJE.CalcControl)};KJE.Biweekly=function(h){var g=KJE;var e=KJE.gLegend;var b=KJE.inputs.items;this.MSG_GRAPH1=KJE.parameters.get("MSG_GRAPH1","Accelerated Balance");this.MSG_GRAPH2=KJE.parameters.get("MSG_GRAPH2","Monthly Balance");KJE.MortgageAmtSlider("LOAN_AMOUNT","Mortgage amount");KJE.MortgageRateSlider("INTEREST_RATE","Interest rate");KJE.DropBox("LOAN_TERM",(h.COMPARE_TYPE=="CAMORTGAGE"?"Mortgage Amortization":"Mortgage term"));if(h.COMPARE_TYPE=="CAMORTGAGE"){KJE.DropBox("LOAN_TERM_END","Mortgage term")}KJE.DropBox("PAYMENT_TYPE","Payment type");KJE.Label("LOAN_PAYMENT1","Normal payment",null,null,"KJEBold");KJE.Label("LOAN_PAYMENT2","Accelerated payment",null,null,"KJEBold");var a=KJE.gNewGraph(KJE.gLINE,"GRAPH1",true,false,KJE.colorList[1],KJE.parameters.get("MSG_GRAPH_TITLE","Accelerated repayments payoff mortgage in KJE1 years."));a._legend._iOrientation=(e.TOP_RIGHT);a._titleYAxis.setText("");a._axisX._fSpacingPercent=0.33;a._iArea=KJE.gGraphColumn.LINE_ON_ALL;var f=KJE.parameters.get("MSG_DROPPER_TITLE","Bi-weekly Payment Calculator Inputs");var d=KJE.parameters.get("MSG_DROPPER_CLOSETITLE","Total savings KJE1");var c=function(){return f};KJE.addDropper(new KJE.Dropper("INPUTS",true,c,c),KJE.colorList[0])};KJE.Biweekly.prototype.setValues=function(b){var a=KJE.inputs.items;b.LOAN_AMOUNT[1]=b.LOAN_AMOUNT[0]=a.LOAN_AMOUNT.getValue();b.INTEREST_RATE[1]=b.INTEREST_RATE[0]=a.INTEREST_RATE.getValue();b.LOAN_TERM[0]=b.LOAN_TERM[1]=a.LOAN_TERM.getValue();if(b.COMPARE_TYPE=="CAMORTGAGE"){b.LOAN_TERM_END[0]=b.LOAN_TERM_END[1]=a.LOAN_TERM_END.getValue()}b.PAYMENT_TYPE[0]=KJE.Default.PAY_MONTHLY;b.PAYMENT_TYPE[1]=Math.round(a.PAYMENT_TYPE.getValue())};KJE.Biweekly.prototype.refresh=function(e){var d=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];KJE.setTitleTemplate(d.dollars(e.INTEREST_PAID[0]-e.INTEREST_PAID[1]));a.removeAll();a.setGraphCategories(e.cats);a.setTitleTemplate(d.number(e.LOAN_TERM_CALC[1],1));a.add(new KJE.gGraphDataSeries(e.DS_PRINCIPAL[0],this.MSG_GRAPH2,a.getColor(1)));a.add(new KJE.gGraphDataSeries(e.DS_PRINCIPAL[1],this.MSG_GRAPH1,a.getColor(2)));a.paint();b.LOAN_PAYMENT1.setText(d.dollars(e.LOAN_PAYMENT[0],2)+" "+KJE.Default.PAY_PERIODS[e.PAYMENT_TYPE[0]]);b.LOAN_PAYMENT2.setText(d.dollars(e.LOAN_PAYMENT[1],2)+" "+KJE.Default.PAY_PERIODS[e.PAYMENT_TYPE[1]])};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id='KJE-C-INTEREST_RATE'><input id='KJE-INTEREST_RATE' /></div> <div id='KJE-C-LOAN_AMOUNT'><input id='KJE-LOAN_AMOUNT' /></div> <div id='KJE-C-LOAN_TERM'>**LOAN_TERM**</div> <div id='KJE-C-PAYMENT_TYPE'>**PAYMENT_TYPE**</div> <div id='KJE-C-LOAN_PAYMENT1'><div id='KJE-LOAN_PAYMENT1'></div></div> <div style=\"height:5px\"></div> <div id='KJE-C-LOAN_PAYMENT2'><div id='KJE-LOAN_PAYMENT2'></div></div> <div style=\"height:20px\"></div> <div style=\"height:10px\"></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-PAYMENT_TYPE' ><dt>Accelerated weekly and biweekly payments</dt><dd>Accelerated weekly and accelerated biweekly payment options are calculated by taking a monthly payment schedule and assuming there are only four weeks in a month. We calculate an accelerated biweekly payment, for example, by taking your normal monthly payment and dividing it by two. Since you would pay 26 biweekly payments, by the end of a year you would have paid the equivalent of one extra monthly payment. This additional amount accelerates your loan payoff by going directly against your loan's principal. The effect can save you thousands of dollars in interest and take years off of your mortgage. <p>The accelerated weekly payment is calculated by dividing your monthly payment by four. You would then make 52 weekly payments. Just like the accelerated biweekly payments, you are in effect paying an additional monthly payment each year.<p> <!--ENDHIDETAXES--></dd></div> <div id='KJE-D-LOAN_AMOUNT' ><dt>Mortgage amount</dt><dd>The total dollar amount for this mortgage.</dd></div> <div id='KJE-D-INTEREST_RATE' ><dt>Interest rate</dt><dd>The interest rate on this mortgage.</dd></div> <div id='KJE-D-LOAN_TERM' ><dt>Mortgage term</dt><dd>The number of years over which you would repay this loan if you made your normal monthly payment. The most common terms for mortgages are 15 years and 30 years.</dd></div> ";KJE.ReportText=' <!--HEADING "Biweekly Mortgage Calculator" HEADING--> <h2 class=\'KJEReportHeader KJEFontHeading\'>Using PAYMENT_TYPE1 payments repay your mortgage in LOAN_TERM1. </h2>Using PAYMENT_TYPE1 payments also reduces your total interest payments from INTEREST_PAID0 to INTEREST_PAID1. <b>This is a total interest savings of INTEREST_SAVINGS</b>.<p>**GRAPH**<p> <div class=KJEReportTableDiv><table class=KJEReportTable> <caption class=\'KJEHeaderRow KJEHeading\'>Results Summary</caption> <thead class=\'KJEReportTHeader\'> <tr class=KJEHeaderRow><th class=KJEHeading>&nbsp; </th><th class=KJEHeading scope=\'col\'> Accelerated Payments </th><th class=KJEHeading scope=\'col\'> Monthly payment without PAYMENT_TYPE1 feature </th></tr> </thead> <tfoot class=\'KJEReportTFooter\'> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Years to repay </th><td class="KJECellStrong KJECellBorder"> LOAN_TERM1</td><td class="KJECellStrong"> LOAN_TERM0</td></tr> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Total interest </th><td class="KJECellStrong KJECellBorder"> INTEREST_PAID1</td><td class="KJECellStrong"> INTEREST_PAID0 </td></tr> <tr class=KJEFooterRow><th class="KJELabel KJECellBorder" scope=\'row\'>Interest savings </th><td class="KJECellStrong KJECellBorder"> INTEREST_SAVINGS</td><td class="KJECellStrong"> &nbsp; </td></tr> </tfoot> <tbody class=\'KJEReportTBody\'> <tr class=KJEOddRow><th class="KJELabel KJECellBorder KJECell40" scope=\'row\'>Mortgage amount </th><td class="KJECell KJECellBorder KJECell30"> LOAN_AMOUNT1 </td><td class="KJECell KJECell30"> LOAN_AMOUNT0 </td></tr> <tr class=KJEEvenRow><th class="KJELabel KJECellBorder" scope=\'row\'>Interest rate </th><td class="KJECell KJECellBorder"> INTEREST_RATE1 </td><td class="KJECell"> INTEREST_RATE0 </td></tr> <tr class=KJEOddRow><th class="KJELabel KJECellBorder" scope=\'row\'>Payment </th><td class="KJECell KJECellBorder"> LOAN_PAYMENT1</td><td class="KJECell"> LOAN_PAYMENT0</td></tr> </tbody> </table> </div> <h2 class=\'KJEScheduleHeader KJEFontHeading\'>Mortgage payoff schedule</h2> **REPEATING GROUP** ';